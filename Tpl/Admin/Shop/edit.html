<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            修改店铺
            <small>修改当前的店铺信息</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="{:U('Admin/Index/index')}"><i class="fa fa-dashboard"></i>控制面板</a></li>
            <li><a href="{:U('Admin/Shop/index')}">店铺管理</a></li>
            <li><a href="#">修改店铺</a></li>
        </ol>
    </section>

    <!-- Main content -->
    <section class="content container-fluid">

        <!--------------------------
          | Your Page Content Here |
          -------------------------->
        <div class="box box-primary">
            <!-- form start -->
            <form role="form">
                <input type="hidden" name="id" value="{$shop.id}">
                <div class="box-body">
                    <div class="form-group">
                        <label for="name">店铺名</label>
                        <input type="text" class="form-control" id="name" name="name" value="{$shop.name}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="score">店铺评分</label>
                        <input type="text" class="form-control" id="score" name="score" value="{$shop.score}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="orders">订单数</label>
                        <input type="text" class="form-control" id="orders" name="orders" value="{$shop.orders}"
                               disabled>
                    </div>
                    <div class="form-group">
                        <label for="type">服务类别</label>
                        <input type="text" class="form-control" id="type" name="type" value="{$shop.type}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="address">店铺地址</label>
                        <input type="text" class="form-control" id="address" name="type" value="{$shop.address}"
                               disabled>
                    </div>
                    <div class="form-group">
                        <label>服务方式</label>
                        <div class="radio">
                            <label>
                                <input type="radio" name="way" value="0" disabled
                                <if condition="$shop.way eq 0">checked</if>
                                >
                                上门服务
                            </label>&nbsp;&nbsp;
                            <label>
                                <input type="radio" name="way" value="1" disabled
                                <if condition="$shop.way eq 1">checked</if>
                                >
                                到店服务
                            </label>&nbsp;&nbsp;
                            <label>
                                <input type="radio" name="way" value="2" disabled
                                <if condition="$shop.way eq 2">checked</if>
                                >
                                上门服务+到店服务
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>审核状态</label>
                        <div class="radio">
                            <label>
                                <input type="radio" name="check" value="0"
                                <if condition="$shop.check eq 0">checked</if>
                                >
                                未审核
                            </label>&nbsp;&nbsp;
                            <label>
                                <input type="radio" name="check" value="1"
                                <if condition="$shop.check eq 1">checked</if>
                                >
                                审核通过
                            </label>&nbsp;&nbsp;
                            <label>
                                <input type="radio" name="check" value="2"
                                <if condition="$shop.check eq 2">checked</if>
                                >
                                审核未通过
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>运营状态</label>
                        <div class="radio">
                            <label>
                                <input type="radio" name="status" value="1"
                                <if condition="$shop.status eq 1">checked</if>
                                >
                                正常
                            </label>&nbsp;&nbsp;
                            <label>
                                <input type="radio" name="status" value="0"
                                <if condition="$shop.status eq 0">checked</if>
                                >
                                禁用
                            </label>
                        </div>
                    </div>
                    <label>价格详情</label>
                    <table class="table table-hover">
                        <tbody>
                        <tr>
                            <th>维修类别</th>
                            <th>维修品牌</th>
                            <th>维修价格</th>
                        </tr>
                        <foreach name="repairs" item="repair">
                            <tr>
                                <td>{$repair.type}</td>
                                <td>{$repair.brand}</td>
                                <td>
                                    {$repair.price}
                                </td>
                            </tr>
                        </foreach>
                        </tbody>
                    </table>
                </div>
                <!-- /.box-body -->

                <div class="box-footer">
                    <button type="button" onclick="save('{:U('Admin/Shop/save')}')" class="btn btn-primary">保存
                    </button>
                </div>
            </form>
            <!-- /.box-body -->
        </div>
    </section>
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->
<script>
    function save(url) {
        $.ajax({
            url: url,
            type: 'post',
            data: $('form').serializeArray(),
            dataType: 'json',
            success: function (response) {
                layer.msg(response.message, {
                    icon: response.code,
                    time: 600
                }, function () {
                    if (response.url) {
                        window.location.href = response.url;
                    }
                });
            }
        });
    }
</script>